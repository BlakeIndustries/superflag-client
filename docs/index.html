<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@superflag/client-react</title><meta name="description" content="Documentation for @superflag/client-react"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@superflag/client-react</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> @superflag/client-react </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#superflagclient-react" id="superflagclient-react" style="color: inherit; text-decoration: none;">
  <h1>@superflag/client-react</h1>
</a>
<p>Superflag is an extensible feature flag library designed to support multiple
tiers of feature flag infrastructure, from a simple constant to staged rollouts.
It is designed to support multiple flag backends via an extensible plugin-style
architecture that allows for easy upgrades to different flag systems with
little to no maintenance overhead.</p>

<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
  <h2>Installation</h2>
</a>
<p>The base Superflag package includes multiple default flag source plugins and
includes support for Typescript out of the box.</p>
<pre><code class="language-shell"><span class="hl-0">npm i @superflag/client-react</span>
</code></pre>

<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
  <h2>Usage</h2>
</a>

<a href="#configure-flag-sources-required" id="configure-flag-sources-required" style="color: inherit; text-decoration: none;">
  <h3>Configure Flag Sources (required)</h3>
</a>
<p>The flag provider uses a basic
<a href="https://reactjs.org/docs/context.html">React Context</a> to pass down the
fetched flag values to either the hooks or default components. In order for
the other utilities in the package to function properly, one must configure
the Flag Provider to wrap any code that depends on it (probably best at the
root level of the project).</p>
<p>The <code>FeatureFlagProvider</code> helper component simplifies the process of setting up
feature flags to a single component. Here&#39;s an example App with the flag
provider configured with a constant value flag source:</p>
<pre><code class="language-jsx"><span class="hl-1">// ...</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">FeatureFlagProvider</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@superflag/client-react&#39;</span><span class="hl-0">;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">createConstantFlagSource</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@superflag/client-react/defaultSources/constant&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">App</span><span class="hl-0"> = () </span><span class="hl-5">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">// ...</span><br/><br/><span class="hl-0">  </span><span class="hl-2">return</span><span class="hl-0"> (</span><br/><span class="hl-0">    </span><span class="hl-7">&lt;</span><span class="hl-8">IntlProvider</span><span class="hl-7">&gt;</span><br/><span class="hl-0">      </span><span class="hl-7">&lt;</span><span class="hl-8">FeatureFlagProvider</span><br/><span class="hl-0">        </span><span class="hl-9">flagSource</span><span class="hl-0">=</span><span class="hl-5">{</span><span class="hl-6">createConstantFlagSource</span><span class="hl-10">({</span><br/><span class="hl-10">          </span><span class="hl-3">useV2ui:</span><span class="hl-10"> </span><span class="hl-5">false</span><span class="hl-10">,</span><br/><span class="hl-10">          </span><span class="hl-3">useNewPaymentGateway:</span><span class="hl-10"> </span><span class="hl-5">true</span><span class="hl-10">,</span><br/><span class="hl-10">        })</span><span class="hl-5">}</span><span class="hl-7">&gt;</span><br/><span class="hl-0">        </span><span class="hl-7">&lt;</span><span class="hl-11">div</span><span class="hl-7">&gt;</span><br/><span class="hl-0">          </span><span class="hl-7">&lt;</span><span class="hl-8">Header</span><span class="hl-0"> </span><span class="hl-7">/&gt;</span><br/><span class="hl-0">          </span><span class="hl-7">&lt;</span><span class="hl-8">Content</span><span class="hl-0"> </span><span class="hl-7">/&gt;</span><br/><span class="hl-0">          </span><span class="hl-7">&lt;</span><span class="hl-8">Footer</span><span class="hl-0"> </span><span class="hl-7">/&gt;</span><br/><span class="hl-0">        </span><span class="hl-7">&lt;/</span><span class="hl-11">div</span><span class="hl-7">&gt;</span><br/><span class="hl-0">      </span><span class="hl-7">&lt;/</span><span class="hl-8">FeatureFlagProvider</span><span class="hl-7">&gt;</span><br/><span class="hl-0">    </span><span class="hl-7">&lt;/</span><span class="hl-8">IntlProvider</span><span class="hl-7">&gt;</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">};</span>
</code></pre>

<a href="#extra-flexibility" id="extra-flexibility" style="color: inherit; text-decoration: none;">
  <h4>Extra flexibility</h4>
</a>
<p>In the unlikely event that you need more flexibility, you can separate
the provider and context declaration for even more extensibility via a
combination of <code>useFeatureFeatureFlagProvider</code> and <code>FeatureFlagProviderRaw</code>.
Here&#39;s the same example but with the calls split out:</p>
<pre><code class="language-jsx"><span class="hl-1">// ...</span><br/><span class="hl-2">import</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-3">FeatureFlagProviderRaw</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">useFeatureFlagProvider</span><span class="hl-0">,</span><br/><span class="hl-0">} </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@superflag/client-react&#39;</span><span class="hl-0">;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">createConstantFlagSource</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@superflag/client-react/defaultSources/constant&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">App</span><span class="hl-0"> = () </span><span class="hl-5">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-12">flagContext</span><span class="hl-0"> = </span><span class="hl-6">useFeatureFlagProvider</span><span class="hl-0">({</span><br/><span class="hl-0">    </span><span class="hl-3">flagSource:</span><span class="hl-0"> </span><span class="hl-6">createConstantFlagSource</span><span class="hl-0">({</span><br/><span class="hl-0">      </span><span class="hl-3">useV2ui:</span><span class="hl-0"> </span><span class="hl-5">false</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-3">useNewPaymentGateway:</span><span class="hl-0"> </span><span class="hl-5">true</span><span class="hl-0">,</span><br/><span class="hl-0">    }),</span><br/><span class="hl-0">  });</span><br/><br/><span class="hl-0">  </span><span class="hl-1">// ...</span><br/><br/><span class="hl-0">  </span><span class="hl-2">return</span><span class="hl-0"> (</span><br/><span class="hl-0">    </span><span class="hl-7">&lt;</span><span class="hl-8">IntlProvider</span><span class="hl-7">&gt;</span><br/><span class="hl-0">      </span><span class="hl-7">&lt;</span><span class="hl-8">FeatureFlagProviderRaw</span><span class="hl-0"> </span><span class="hl-5">{</span><span class="hl-0">...</span><span class="hl-3">flagContext</span><span class="hl-5">}</span><span class="hl-7">&gt;</span><br/><span class="hl-0">        </span><span class="hl-7">&lt;</span><span class="hl-11">div</span><span class="hl-7">&gt;</span><br/><span class="hl-0">          </span><span class="hl-7">&lt;</span><span class="hl-8">Header</span><span class="hl-0"> </span><span class="hl-7">/&gt;</span><br/><span class="hl-0">          </span><span class="hl-7">&lt;</span><span class="hl-8">Content</span><span class="hl-0"> </span><span class="hl-7">/&gt;</span><br/><span class="hl-0">          </span><span class="hl-7">&lt;</span><span class="hl-8">Footer</span><span class="hl-0"> </span><span class="hl-7">/&gt;</span><br/><span class="hl-0">        </span><span class="hl-7">&lt;/</span><span class="hl-11">div</span><span class="hl-7">&gt;</span><br/><span class="hl-0">      </span><span class="hl-7">&lt;/</span><span class="hl-8">FeatureFlagProviderRaw</span><span class="hl-7">&gt;</span><br/><span class="hl-0">    </span><span class="hl-7">&lt;/</span><span class="hl-8">IntlProvider</span><span class="hl-7">&gt;</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">};</span>
</code></pre>

<a href="#consuming-flags" id="consuming-flags" style="color: inherit; text-decoration: none;">
  <h3>Consuming flags</h3>
</a>
<p>There are multiple hooks and convenience components available. Both
can be used together if desired, the convenience components just reduce the
amount of identical code by handling common use cases (hiding/showing a
component based on a flag).</p>
<p>Hooks:</p>
<ul>
<li><code>useFeatureFlagContext()</code> - returns the entire flag context, including
loading, the flags, and the identify function</li>
<li><code>useFeatureFlags()</code> - returns all feature flags in key-value form</li>
<li><code>useFeatureFlag(flagKey)</code> - returns a single flag value</li>
</ul>
<p>Components:</p>
<ul>
<li><code>&lt;FeatureFlagGate flagKey={...}&gt;</code> - Hides its children if the flag is false,
shows the children if the flag is true</li>
<li><code>&lt;FeatureFlagSwitch whenTrue={...} whenFalse={...}&gt;</code> - shows the passed
value of whenFalse if the flag is false, shows the passed value of whenTrue if
the flag is true. Both props are optional</li>
</ul>
<p>Here&#39;s an example where everything is used:</p>
<pre><code class="language-typescript"><span class="hl-2">import</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-3">useFeatureFlagContext</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">useFeatureFlags</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">useFeatureFlag</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">FeatureFlagGate</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">FeatureFlagSwitch</span><span class="hl-0">,</span><br/><span class="hl-0">} </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@superflag/client-react&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">ShoppingCart</span><span class="hl-0"> = () </span><span class="hl-5">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">// option 1</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> { </span><span class="hl-12">loading</span><span class="hl-0">, </span><span class="hl-12">flags</span><span class="hl-0"> } = </span><span class="hl-6">useFeatureFlagContext</span><span class="hl-0">();</span><br/><span class="hl-0">  </span><span class="hl-1">// option 2</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> { </span><span class="hl-12">useV2ui</span><span class="hl-0"> } = </span><span class="hl-6">useFeatureFlags</span><span class="hl-0">();</span><br/><span class="hl-0">  </span><span class="hl-1">// option 3</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-12">useNewPaymentGateway</span><span class="hl-0"> = </span><span class="hl-6">useFeatureFlag</span><span class="hl-0">(</span><span class="hl-4">&#39;useNewPaymentGateway&#39;</span><span class="hl-0">);</span><br/><br/><span class="hl-0">  </span><span class="hl-1">// apollo GQL mutation function</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> [</span><span class="hl-12">checkout</span><span class="hl-0">] = </span><span class="hl-6">useMutation</span><span class="hl-0">(</span><span class="hl-3">endpoints</span><span class="hl-0">.</span><span class="hl-3">checkout</span><span class="hl-0">);</span><br/><br/><span class="hl-0">  </span><span class="hl-2">return</span><span class="hl-0"> (</span><br/><span class="hl-0">    &lt;</span><span class="hl-8">div</span><span class="hl-0">&gt;</span><br/><span class="hl-0">      {</span><span class="hl-3">loading</span><span class="hl-0"> &amp;&amp; &lt;</span><span class="hl-3">LoadingSpinner</span><span class="hl-0"> /&gt;}</span><br/><span class="hl-0">      {</span><span class="hl-1">/* option 1 */</span><span class="hl-0">}</span><br/><span class="hl-0">      &lt;</span><span class="hl-8">h1</span><span class="hl-0">&gt;{useV2ui ? </span><span class="hl-4">&#39;Cart&#39;</span><span class="hl-3"> :</span><span class="hl-0"> </span><span class="hl-4">&#39;New and Improved Cart&#39;</span><span class="hl-0">}&lt;/</span><span class="hl-3">h1</span><span class="hl-0">&gt;</span><br/><span class="hl-0">      {</span><span class="hl-1">/* option 2 */</span><span class="hl-0">}</span><br/><span class="hl-0">      &lt;</span><span class="hl-3">FeatureFlagGate</span><span class="hl-0"> </span><span class="hl-3">flagKey</span><span class="hl-0">=</span><span class="hl-4">&quot;useV2ui&quot;</span><span class="hl-0">&gt;</span><br/><span class="hl-0">        &lt;</span><span class="hl-3">input</span><span class="hl-0"> </span><span class="hl-3">name</span><span class="hl-0">=</span><span class="hl-4">&quot;v2-input&quot;</span><span class="hl-0"> /&gt;</span><br/><span class="hl-0">      &lt;/</span><span class="hl-3">FeatureFlagGate</span><span class="hl-0">&gt;</span><br/><span class="hl-0">      {</span><span class="hl-1">/* option 3*/</span><span class="hl-0">}</span><br/><span class="hl-0">      &lt;</span><span class="hl-3">FeatureFlagSwitch</span><br/><span class="hl-0">        </span><span class="hl-3">flagKey</span><span class="hl-0">=</span><span class="hl-4">&quot;useV2ui&quot;</span><br/><span class="hl-0">        </span><span class="hl-3">whenTrue</span><span class="hl-0">={&lt;textarea </span><span class="hl-3">name</span><span class="hl-0">=</span><span class="hl-4">&quot;v2-textarea&quot;</span><span class="hl-0"> /&gt;}</span><br/><span class="hl-0">        </span><span class="hl-3">whenFalse</span><span class="hl-0">={&lt;select </span><span class="hl-3">name</span><span class="hl-0">=</span><span class="hl-4">&quot;v1-select&quot;</span><span class="hl-0"> /&gt;}</span><br/><span class="hl-0">      /&gt;</span><br/><br/><span class="hl-0">      &lt;</span><span class="hl-3">button</span><br/><span class="hl-0">        </span><span class="hl-3">onClick</span><span class="hl-0">={() =&gt; {</span><br/><span class="hl-0">          </span><span class="hl-6">checkout</span><span class="hl-0">({ </span><span class="hl-3">variables</span><span class="hl-0">: { </span><span class="hl-3">price</span><span class="hl-0">: </span><span class="hl-3">useNewPaymentGateway</span><span class="hl-0"> ? </span><span class="hl-13">1.5</span><span class="hl-0"> : </span><span class="hl-13">2.5</span><span class="hl-0"> } });</span><br/><span class="hl-0">        }}&gt;</span><br/><span class="hl-0">        </span><span class="hl-3">Checkout</span><br/><span class="hl-0">      &lt;/</span><span class="hl-3">button</span><span class="hl-0">&gt;</span><br/><span class="hl-0">    &lt;/</span><span class="hl-3">div</span><span class="hl-0">&gt;</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">};</span>
</code></pre>

<a href="#testing" id="testing" style="color: inherit; text-decoration: none;">
  <h2>Testing</h2>
</a>
<p>Superflag supports mocking flags for testing purposes in one of two ways:</p>
<ul>
<li>For unit tests, <code>MockFeatureFlagProvider</code> can be used to mock the feature
flag values</li>
<li>For integration/e2e testing (live), one can swap out the <code>flagSource</code> when in
different environments. For example, one could switch a LaunchDarkly flag
source out for a constant flag source in testing/development environments</li>
</ul>

<a href="#bugs-amp-contributions" id="bugs-amp-contributions" style="color: inherit; text-decoration: none;">
  <h2>Bugs &amp; Contributions</h2>
</a>
<p>Please report any bugs to the Github issue tracker for this project. Any
bug reports or PR submissions are appreciated!</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/_superflag_client_react.html">@superflag/client-<wbr/>react</a></li><li class=" tsd-kind-module"><a href="modules/defaultSources_constant.html">default<wbr/>Sources/constant</a></li><li class=" tsd-kind-module"><a href="modules/defaultSources_launchDarkly.html">default<wbr/>Sources/launch<wbr/>Darkly</a></li><li class=" tsd-kind-module"><a href="modules/defaultSources_webRequest.html">default<wbr/>Sources/web<wbr/>Request</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>